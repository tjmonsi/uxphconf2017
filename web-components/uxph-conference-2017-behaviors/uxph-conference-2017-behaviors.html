<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-storage/app-network-status-behavior.html">

<script>
    (function() {

        /** @polymerBehavior Polymer.UXPHConf2017Behavior */
        Polymer.UXPHConf2017BehaviorImpl = {
            properties: {
                speakers: {
                    type: Array,
                    value: null
                },
                pledges: {
                    type: Array,
                    value: null
                },
                venues: {
                    type: Array,
                    value: null
                },
                _pledgeCount: {
                    type: Object,
                    value: function() {
                        return {};
                    }
                },
                _speakerList: {
                    type: String,
                    readonly: true,
                    value: function() {
                        return this.__speakerList;
                    }
                },
                _pledgeList: {
                    type: String,
                    readonly: true,
                    value: function() {
                        return this.__pledgeList
                    }
                },
                _venuesList: {
                    type: String,
                    readonly: true,
                    value: function() {
                        return this.__venueList
                    }
                },
                _systemInfo: {
                    type: String,
                    readonly: true,
                    value: function() {
                        return this.__systemInfo
                    }
                },
                _contactInfo: {
                    type: String,
                    readonly: true,
                    value: function() {
                        return this.__contactInfo
                    }
                }
            },

            observers: [
                '_renderSpeakerList(_speakers.*)',
                '_renderPledgesList(_pledges.*)',
                '_renderVenuesList(_venues.*)'
            ],

            get __conferenceInfoPath() {
                return 'conferenceInfo'
            },

            get __feedbackPath() {
                return 'feedbackGroup'
            },

            get __speakerList() {
                return `${this.__conferenceInfoPath}/speakers`
            },

            get __pledgeList() {
                return `${this.__conferenceInfoPath}/pledges`
            },

            get __venueList() {
                return `${this.__conferenceInfoPath}/venue`
            },

            get __contactInfo() {
                return `${this.__feedbackPath}/contactInfo`
            },

            get __systemInfo() {
                return `${this.__feedbackPath}/systemInfo`
            },

            get __pledgesSurvey() {
                return `${this.__feedbackPath}/pledgesSurvey`
            },

            get __pledgesSurveyCount() {
                return `${this.__feedbackPath}/pledgesSurveyCount`
            },

             get __placeSurvey() {
                return `${this.__feedbackPath}/placeSurvey`
            },

            _renderSpeakerList: function() {
                var array = [];
                for (var i in this._speakers) {
                var obj = this._speakers[i];
                obj.$key = i;
                array.push(obj);
                }
                this.speakers = array;
            },

            _renderPledgesList: function() {
                var array = [];
                for (var i in this._pledges) {
                var obj = this._pledges[i];
                obj.$key = i;
                array.push(obj);
                }
                this.pledges = array;
            },

            _renderVenuesList: function() {
                var array = [];
                for (var i in this._venues) {
                var obj = this._venues[i];
                obj.$key = i;
                array.push(obj);
                }
                this.venues = array;
            }
        }

        Polymer.UXPHConf2017Behavior = [
            Polymer.AppNetworkStatusBehavior,
            Polymer.UXPHConf2017BehaviorImpl
        ]
    })();
</script>